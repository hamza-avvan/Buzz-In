<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Quiz Show</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Materialize CSS & Icons -->
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css" rel="stylesheet" />
  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

  <!-- Emoji Button Library -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet">
<link href="lib/css/emoji.css" rel="stylesheet">

<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="lib/js/config.min.js"></script>
<script src="lib/js/util.min.js"></script>
<script src="lib/js/jquery.emojiarea.min.js"></script>
<script src="lib/js/emoji-picker.min.js"></script>

<link href="css/style.css" rel="stylesheet">
  <script src="/socket.io/socket.io.js"></script>
  <script defer src="js/client.js"></script>

</head>
<body>

  <!-- Login Area -->
 <div id="loginArea" class="container main-container">
    <div class="card white z-depth-2">
        <h4 class="center-align">üéâ Welcome to Quiz Show</h4>
        <div class="input-field">
        <input type="text" autofocus id="username" onkeydown="loginOnEnter(event)">
        <label for="username">Enter your name</label>
        <!-- Send icon button -->
        <button class="btn-flat input-style-btn" style="color: #26a69a;" onclick="login()" aria-label="Send" title="Send">
            <i class="material-icons">send</i>
        </button>
        </div>
    </div>
</div>

  <!-- Game Area -->
  <div class="row container main-container">
    <div class="col s12 m7 l7 xl7" id="gameArea" >
        
    
    <!-- Modal Structure -->
    <div id="modal1" class="modal modal-fixed-footer">
        <div class="modal-content">
            <h4>Quiz Show Rules</h4>
            <div class="divider"></div>
                <ul class="browser-default">
                <li>üèÜ <strong>First to 6 correct answers wins</strong> (out of 10 questions)</li>
                <li>üîî <strong>Buzz in</strong> by clicking the Buzz button when you know the answer</li>
                <li>‚ö° <strong>Fast fingers win!</strong> Only the first buzz gets to answer</li>
                <li>üí¨ <strong>Chat freely</strong> with your opponent during the game</li>
                <li>‚ùå <strong>Wrong answers</strong> give the other player the next question</li>
                <li>‚è±Ô∏è <strong>Answer quickly</strong> - you have limited time after buzzing</li>
                </ul>
                <div class="divider"></div>
                <h5>Scoring</h5>
                <ul class="browser-default">
                <li>‚úÖ <strong>Correct answer:</strong> +1 point</li>
                <li>‚ùå <strong>Wrong answer:</strong> 0 points</li>
                <li>üèÖ <strong>Tiebreaker:</strong> Most points after 10 questions wins</li>
                </ul>
        
            <div class="section">
                <h5><i class="material-icons">forum</i> Chat Features</h5>
                <p>Between questions, feel free to chat with your opponent using the message box below the game. Keep it friendly!</p>
            </div>
        
            <div class="divider"></div>
            
            <div class="tip-box">
                <p><strong><i class="material-icons">lightbulb_outline</i> Pro Tip:</strong> The faster you buzz, the better your chances - but make sure you actually know the answer!</p>
            </div>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-green btn-flat">Close</a>
        </div>
    </div>

    <div class="card white z-depth-2">
        <h6 id="status" class="center-align"></h6>
        <h5 id="question" class="center-align"></h5>

        <button id="buzzBtn" onclick="buzz()" class="btn hide-on-small-only waves-effect waves-light green">Buzz!</button>
        
        <div class="fixed-action-btn hide-on-med-and-up" style="left: 80px;bottom: 20px;bottom: 23px;width: 286px;">
            <button onclick="buzz()" style="width: 100%;" class="btn show-on-small-only waves-effect waves-light green">Buzz!</button>
        </div>

        <div id="answerArea" class="input-field" style="display:none;">
            <input type="text" id="answerInput" onkeypress="submitAnswerOnEnter(event)" placeholder="Your answer" />
            <button class="btn-flat input-style-btn" onclick="submitAnswer()" id="" style="margin: 0;">
                <i class="material-icons" style="color: orange;">send</i>
            </button>
        </div>

        <p id="result" class="center-align red-text"></p>

        <!-- Chat UI -->
        <div class="chat-box" id="chatBox"></div>

        <!-- Chat Input with Emoji -->
            <div class="send-chat">
                <div class="input-field">
                    <input type="text" id="chatInput" onkeypress="sendMessageOnEnter(event)">
                    <label for="chatInput" class="">Say something...</label>

                    <!-- Emoji Picker Trigger -->
                    <div class="emoji-picker-container">
                        <input type="text" data-emojiable="true" class="hide">
                    </div>
                    <button class="btn-flat input-style-btn emoji-btn" id="" title="Add emoji" style="margin: 0;">
                    <i class="material-icons">emoji_emotions</i>
                    </button>
                    <!-- Send icon button -->
                    <button class="btn-flat input-style-btn sendmsg" onclick="sendChat()" aria-label="Send" title="Send">
                        <i class="material-icons">send</i>
                    </button>
                </div>
            </div>
    

        </div>
    </div>

    <!-- Player Stats Area (right side) -->
    <div id="statsArea" class="col s12 m4 l4 xl4 stats-area">
        <div class="card white z-depth-2">
        <h5 class="center-align">Player Stats</h5>
        
        <!-- Current Player Stats -->
        <div class="player-stats">
            <div class="player-header">
            <img id="playerAvatar" class="avatar" src="" alt="Player Avatar">
            <h6 id="playerName"></h6>
            </div>
            <div class="stats-grid">
            <div>Questions:</div>
            <div id="playerTotalQ">0</div>
            <div>Completed:</div>
            <div id="playerCompleted">0</div>
            <div>Correct:</div>
            <div id="playerCorrect">0</div>
            <div>Score:</div>
            <div id="playerScore">0</div>
            </div>
        </div>

        <!-- Opponent Stats -->
        <div class="player-stats opponent">
            <div class="player-header">
                <div class="preloader-wrapper active" id="preloader">
                    <div class="spinner-layer spinner-blue-only">
                        <div class="circle-clipper left">
                        <div class="circle"></div>
                        </div><div class="gap-patch">
                        <div class="circle"></div>
                        </div><div class="circle-clipper right">
                        <div class="circle"></div>
                        </div>
                    </div>
                </div>
                
                <img id="opponentAvatar" class="avatar avatarSection hide" src="" alt="Opponent Avatar">
                <h6 id="opponentName" class="avatarSection">Searching opponent...</h6>
            </div>
            <div class="stats-grid">
                <div class="bold">Questions:</div>
                
                <div class="progress">
                    <div class="indeterminate"></div>
                </div>

                <div class="stats-value hide" id="opponentTotalQ">0</div>
                <div class="bold">Completed:</div>
                <div class="progress">
                    <div class="indeterminate"></div>
                </div>
                <div class="stats-value hide" id="opponentCompleted">0</div>
                <div class="bold">Correct:</div>
                <div class="progress">
                    <div class="indeterminate"></div>
                </div>
                <div class="stats-value hide" id="opponentCorrect">0</div>
                <div class="bold">Score:</div>
                <div class="progress">
                    <div class="indeterminate"></div>
                </div>
                <div class="stats-value hide" id="opponentScore">0</div>
            </div>
           
           
        </div>
         <!-- Modal Trigger -->
         <button id="quitBtn" class="waves-effect waves-light btn-small red" onclick="quitGame()" 
                    title="Leave Game" aria-label="Leave Game">
            <i class="material-icons">exit_to_app</i> Leave Game
        </button>
         <div class="fixed-action-btn" style="left: 5px;bottom: 20px; bottom: 23px;width: 100px;">
            <a class="btn-floating waves-effect waves-light blue modal-trigger" href="#modal1"><i class="material-icons">help_outline</i></a>
          </div>

        </div>
    </div>
</div>

<!-- Audio elements for sound effects -->
<audio id="messageSound" preload="auto">
    <source src="sounds/msg.mp3" type="audio/mpeg">
  </audio>
  <audio id="correctSound" preload="auto">
    <source src="sounds/correct.mp3" type="audio/mpeg">
  </audio>
  <audio id="wrongSound" preload="auto">
    <source src="sounds/wrongans.mp3" type="audio/mpeg">
  </audio>
  <audio id="startSound" preload="auto">
    <source src="sounds/start.mp3" type="audio/mpeg">
  </audio>
  <audio id="buzzSound" preload="auto">
    <source src="sounds/buzz.m4a" type="audio/mpeg">
  </audio>


  <script>
    $(document).ready(function(){
        $('.modal').modal();
    });

    $(function() {
        // Initializes and creates emoji set from sprite sheet
        window.emojiPicker = new EmojiPicker({
          emojiable_selector: '[data-emojiable=true]',
          assetsPath: '/lib/img/',
          popupButtonClasses: 'emoji-btn' // far fa-smile if you're using FontAwesome 5
        });
        // Finds all elements with `emojiable_selector` and converts them to rich emoji input fields
        // You may want to delay this step if you have dynamically created input fields that appear later in the loading process
        // It can be called as many times as necessary; previously converted input fields will not be converted again
        window.emojiPicker.discover();
      });

    $(".emoji-btn").on('click', function() {
        $('.emoji-menu').css("display", "block");
    })
  </script>
</body>
</html>
